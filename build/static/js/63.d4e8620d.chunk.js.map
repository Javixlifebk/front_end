{"version":3,"sources":["views/dashboard/admin/UserIssue.js"],"names":["CustomHeader","props","className","value","placeholder","onChange","e","handleFilter","size","JTable","handleSubmit","preventDefault","window","confirm","location","target","data","state","filteredData","setState","length","filter","item","console","dir","userId","startsWithCondition","issueNo","toLowerCase","startsWith","issue","issueDetails","includesCondition","includes","info","firstName","action","columns","name","selector","sortable","minWidth","cell","row","title","href","createdAt","status","recs","loadRecs","bind","this","log","mounted","axios","post","localStorage","getItem","then","response","message","Fragment","lg","md","sm","Ripple","color","type","onClick","noHeader","pagination","subHeader","subHeaderComponent","React","Component"],"mappings":"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","file":"static/js/63.d4e8620d.chunk.js","sourcesContent":["import React from \"react\"\nimport {\n  Card,\n  CardBody,\n  CardHeader,\n  CardTitle,\n  Row,\n  Col,\n  Badge,\n  Input,\n  Button\n} from \"reactstrap\"\nimport DataTable from \"react-data-table-component\"\nimport { Star, Search } from \"react-feather\"\nimport axios from \"axios\";\nconst CustomHeader = props => {\n  return (\n    <div className=\"d-flex flex-wrap justify-content-between\">\n      <div className=\"add-new\">\n        \n      </div>\n      <div className=\"position-relative has-icon-left mb-1\">\n        <Input value={props.value} placeholder=\"search\" onChange={e => props.handleFilter(e)} />\n        <div className=\"form-control-position\">\n          <Search size=\"15\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nclass JTable extends React.Component {\n constructor(props) {\n    super(props);\t\n  this.state = {\n      action:{\"0\":\"New Issue\",\"1\":\"Assigned\",\"2\":\"Resoved\",\"3\":\"Closed\"},\n    columns: [\n      {\n        name: \"Issue No\",\n        selector: \"ID\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            \n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n             \n              <small title={row.issueNo}><a href=\"#\">{row.issueNo}</a></small>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"By User\",\n        selector: \"User\",\n        sortable: true,\n        cell: row => (\n          <p className=\"text-bold-500 text-truncate mb-0\">{row.userId}</p>\n        )\n      },\n      {\n        name: \"Subject\",\n        selector: \"subject\",\n        sortable: true,\n        cell: row => (\n          <p className=\"text-bold-500 mb-0\">{row.issue}</p>\n        )\n      },\n      {\n        name: \"Issue\",\n        selector: \"issue\",\n        sortable: true,\n        cell: row => (\n          <p className=\"text-bold-500  mb-0\">{row.issueDetails}</p>\n        )\n      },\n      {\n        name: \"Date\",\n        selector: \"date\",\n        sortable: true,\n        cell: row => (\n          <p className=\"text-bold-500  mb-0\">{row.createdAt}</p>\n        )\n      },\n      {\n        name: \"Status\",\n        selector: \"satus\",\n        sortable: true,\n        cell: row => (\n          <p className=\"text-bold-500  mb-0\">{this.state.action[row.status]}</p>\n        )\n      }    \n    ],\n    data: [],\n    filteredData: [],\n    value: \"\",\n\trecs:[]\n  }\n  this.loadRecs = this.loadRecs.bind(this);\n} // cosntructor\nloadRecs(recs)\n {\n\t \n\t this.setState({data:recs});\n\t console.log(this.state.recs);\n }\n\n handleSubmit = e => {\n  e.preventDefault()\n  \n\n if(window.confirm(\"Do you want to raise issue !\")){\n\n //alert('okay')\n window.location='../../views/dashboard/reportissue'\n }\n\n \n\n}\n  \n\ncomponentDidMount() {console.log(\"DID MOUNT ************\");\n\t\tthis.mounted = true;\n\t\t//this.setState({data:null});\n\t\t  axios.post('http://159.65.148.197:3001/api/issues/issuesByUser',{userId:localStorage.getItem(\"userid\") })\n\t\t .then(response => {\n\t\t\t\t\tconsole.log(\"Returned data:\", response.data.status);\n\t\t\t\t\tif(response.data.status===1)\n\t\t\t\t\t  {\n\t\t\t\t\t\t  var msg=response.data.message;\n\t\t\t\t\t\t  var recs=response.data.data.data;\n\t\t\t\t\t\t  this.loadRecs(recs);\n             \n\t\t\t\t\t  }\n\t\t });// then\n}\n\n  handleFilter = e => {\n    let value = e.target.value\n    let data = this.state.data\n    let filteredData = this.state.filteredData\n    this.setState({ value })\n\n    if (value.length) {\n      filteredData = data.filter(item => {\n\t\t  console.dir(item.userId);\n        let startsWithCondition =\n           item.issueNo.toLowerCase().startsWith(value.toLowerCase()) ||\n           item.issue.toLowerCase().startsWith(value.toLowerCase()) ||\n           item.issueDetails.toLowerCase().startsWith(value.toLowerCase()) \n        let includesCondition =\n          item.issue.toLowerCase().includes(value.toLowerCase()) ||\n          item.info.firstName.toLowerCase().includes(value.toLowerCase()) ||\n\t\t      item.issueDetails.toLowerCase().includes(value.toLowerCase())\n\n        if (startsWithCondition) {\n          return startsWithCondition\n        } else if (!startsWithCondition && includesCondition) {\n          return includesCondition\n        } else return null \n      })\n      this.setState({ filteredData })\n    }\n\t\n  }\n\n  /* render for all */\n  render() {\n    let { data, columns, value, filteredData } = this.state\n    return (\n      <React.Fragment >\n         <Row>\n      <Col lg=\"12\" md=\"12\">\n      <Card>\n        <CardHeader>\n       \n        </CardHeader>\n        <CardBody className=\"rdt_Wrapper\">\n        <Row>\n          <Col sm=\"6\">\n          <CardTitle>Issue List</CardTitle>\n          </Col>\n          <Col sm=\"6\">\n          <Button.Ripple\n                    color=\"primary\"\n                    type=\"button\"\n                    className=\"mr-1 mb-1\"\n                    onClick={this.handleSubmit}\n                  >\n                    Raise an Issue\n        </Button.Ripple>\n          </Col>\n          </Row>\n          <Row>\n          <Col sm=\"12\">\n          <DataTable\n            className=\"dataTable-custom\"\n            data={value.length ? filteredData : data}\n            columns={columns}\n            noHeader\n            pagination\n            subHeader\n            subHeaderComponent={\n              <CustomHeader value={value} handleFilter={this.handleFilter} />\n            }\n          />\n          </Col>\n          </Row>\n        </CardBody>\n      </Card>\n      </Col>\n      </Row>\n      </React.Fragment>\n    )\n  }\n  /* ENd rebder */\n}\n\nexport default JTable\n"],"sourceRoot":""}